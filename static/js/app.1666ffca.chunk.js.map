{"version":3,"sources":["D2App/i18n.js","D2App/locales/index.js","D2App/configI18n.js","D2App/styles.js","D2App/utils/feedbackSnackBarTypes.js","D2App/utils/pagination.js","D2App/pages/Translations/ConfirmationDialog.js","D2App/pages/Translations/translations.conf.js","D2App/pages/Translations/TranslationCard.style.js","D2App/pages/Translations/TranslationCard.js","D2App/pages/Translations/TranslationsList.style.js","D2App/pages/Translations/TranslationsList.js","D2App/pages/Translations/TranslationsSearch.style.js","D2App/pages/Translations/TranslationsSearch.js","D2App/pages/Translations/index.js","D2App/components/App.js","D2App/App.js"],"names":["i18nKeys","searchToolbar","selects","objects","label","locales","filterBy","all","translated","untranslated","partialTranslated","searchTextField","translationForm","name","shortName","description","formName","numeratorDescription","denominatorDescription","fromToName","toFromName","instruction","incidentDateLabel","enrollmentDateLabel","executionDateLabel","dueDateLabel","content","actionButton","domainAxisLabel","rangeAxisLabel","targetLineLabel","subtitle","title","baseLineLabel","subjectTemplate","messageTemplate","messages","unsavedChanges","unexpectedError","translationsSaved","invalidForm","btns","keepEditing","discard","unsavedChangesTitle","d2UiComponents","settings","app_search_placeholder","profile","account","help","log_out","about_dhis2","manage_my_apps","no_results_found","interpretations","namespace","i18n","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","DEFAULT_LOCALE","id","LATERAL_PADDING_FOR_MAIN_CONTAINERS","styles","contentArea","maxWidth","feedbackSnackBar","position","top","left","transform","zIndex","formControl","paddingRight","cardContainer","outline","paddingLeft","paddingTop","paddingBottom","marginBottom","actionBtns","marginLeft","LOADING","calculatePageValue","pager","pageSize","total","pageCount","page","pageCalculationValue","filterElementsToPager","elements","pageElements","slice","length","open","hasNextPage","hasPreviousPage","ConfirmationDialog","props","StyledDialog","withStyles","root","margin","DialogActions","React","createElement","Dialog","DialogTitle","t","DialogContent","DialogContentText","Button","style","onClick","closeConfirmation","raised","color","autoFocus","TRANSLATED_ID","UNTRANSLATED_ID","PARTIAL_TRANSLATED_ID","ALL_ITEM","TRANSLATED_ITEM","UNTRANSLATED_ITEM","PARTIAL_TRANSLATED_ITEM","FILTER_BY_ITEMS","INITIAL_LOCALES","INITIAL_PAGER","colors","actionsContainer","header","cursor","textTransform","icon","textAlign","translationValueOfObjectForLocaleAndTranslationKey","object","localeId","translationKey","selectedTranslation","translations","find","translation","locale","property","value","TranslationCard","onChangeTranslationForObjectAndLocale","hasUnsavedChanges","checkSave","getState","originalState","translationState","saveTranslationsOnKeyPress","event","key","ctrlKey","saveTranslations","Paper","tabIndex","onFocus","openCard","Grid","translationCardStyles","openCardOnClick","container","alignItems","item","xs","cardTitleProperty","Done","Fragment","translatableProperties","map","index","_i18nKeys$translation","md","TextField","fullWidth","type","onChange","objectId","target","onKeyDown","clearFeedback","onBlur","disabled","defaultProps","noResultsContainer","marginTop","pagination","PaginationBuilder","goToNextPage","goToPreviousPage","Pagination","PAGINATION_HELPER","onNextPageClick","onPreviousPageClick","currentlyShown","NoResults","translationsListStyles","TranslationsList","backgroundColor","SelectControl","items","select","MenuItem","nonHandler","TranslationsSearch","translationsSearchStyles","selectedObjectName","onObjectChange","objectSelectItems","objectSelectLabel","selectedFilterId","onFilterChange","filterByItems","filterBySelectLabel","selectedLocaleId","onLocaleChange","localeSelectItems","localeSelectLabel","searchFieldLabel","searchTerm","onSearchTermChange","InputProps","startAdornment","InputAdornment","Search","onKeyPress","onSearchKeyPress","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","DEFAULT_SNACKBAR_CONF","message","action","onActionClick","OVERRIDE_TITLE_AND_SEARCH_PROPS","programRuleAction","modelToSchemaEntry","model","displayName","getTranslatablePropertiesWithKeys","apiEndpoint","flatElementForPropertiesAndLocale","element","translatedProperties","j","translationForPropertyAndLocale","trim","push","PAGE_CONFIGS","TranslationsPage","PureComponent","constructor","super","this","selectedLocale","applyNextSearchFilter","nextSearchFilterWithChange","selectedFilter","state","unsavedChangesMap","setState","showConfirmation","nextSelectedObject","fetchElementsForObjectAndUpdateResults","searchFilter","clearFeedbackSnackbar","updateOriginalsOnChange","searchResults","searchResultsItemInstance","objectInstance","translationEntryForSearchResult","currentPageResults","selectedObjectInstance","translationEntry","response","originalItemInstance","objectInstances","elementWithState","selectedObject","some","unsavedChange","originalTranslations","translationEntryForOriginal","api","d2","Api","getApi","currentLocale","selectedObjectIndex","findIndex","selectedObjectIndexInSearchResults","originalInstances","selectedOriginalObjectIndex","originalInstance","unsaved","startLoading","translationsUrlForInstance","inViewEditedTranslations","filter","allTranslationsForElement","allOriginalTranslationsForUnsaved","flatMap","filterTranslations","existInNotSaved","update","then","flatElement","showSuccessMessage","catch","error","manageError","nextPager","o","openCardWithObjectId","models","list","paging","fields","toArray","get","modelKeys","keys","modelNames","Set","schemas","i","modelName","has","isTranslatable","currentUser","canUpdate","add","sort","objectA","objectB","userLocaleId","userSettings","keyUiLocale","nextSearchFilter","currentObjectInstances","prepareElementsToShowAndFilter","Math","ceil","currentFilterId","currentSearchTerm","toLowerCase","newElements","_element","_element$trim","_element$trim$toLower","_OVERRIDE_TITLE_AND_S","_searchFilter$selecte","includes","searchFilterChange","languagesResponse","language","showSnackbar","snackbarConf","FEEDBACK_SNACKBAR_TYPES","messageError","showErrorMessage","schemaEntries","updatableAndTranslatableModelsAsSchemaEntries","componentDidMount","promiseToFetchLanguages","buildLanguageSelectItemsArrayFromApiResponse","userLocaleFrom","render","_OVERRIDE_TITLE_AND_S2","_this$state","_this$state$searchFil","_this$state$searchFil2","feedbackElement","isLoading","CircularProgress","FeedbackSnackbar","onClose","show","conf","saveTranslationForObjectId","PropTypes","isRequired","App","D2UIApp","AppWrapper","useD2"],"mappings":"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","file":"static/js/app.1666ffca.chunk.js","sourcesContent":["export const i18nKeys = {\n  searchToolbar: {\n    selects: {\n      objects: {\n        label: 'Object'\n      },\n      locales: {\n        label: 'Target locale'\n      },\n      filterBy: {\n        label: 'Filter by',\n        all: 'All',\n        translated: 'Translated',\n        untranslated: 'Untranslated',\n        partialTranslated: 'Partial translated'\n      }\n    },\n    searchTextField: {\n      label: 'Search'\n    }\n  },\n  translationForm: {\n    name: 'Name',\n    shortName: 'Short name',\n    description: 'Description',\n    formName: 'Form name',\n    numeratorDescription: 'Numerator description',\n    denominatorDescription: 'Denominator description',\n    fromToName: 'From to name',\n    toFromName: 'To from name',\n    instruction: 'Instruction',\n    incidentDateLabel: 'Incident date label',\n    enrollmentDateLabel: 'Enrollment date label',\n    executionDateLabel: 'Execution date label',\n    dueDateLabel: 'Due date label',\n    content: 'Content',\n    actionButton: {\n      label: 'Save'\n    },\n    domainAxisLabel: 'Domain axis label',\n    rangeAxisLabel: 'Range axis label',\n    targetLineLabel: 'Target line label',\n    subtitle: 'Subtitle',\n    title: 'Title',\n    baseLineLabel: 'Base line label',\n    subjectTemplate: 'Subject template',\n    messageTemplate: 'Message template'\n  },\n  messages: {\n    unsavedChanges: 'Changes on object will be lost if you do not save them first.',\n    unexpectedError: 'Unexpected Error',\n    translationsSaved: 'Translations were saved',\n    invalidForm: 'A locale and object must be selected'\n  },\n  btns: {\n    keepEditing: 'Keep editing',\n    discard: 'Discard changes'\n  },\n  unsavedChangesTitle: 'Unsaved changes',\n  d2UiComponents: {\n    settings: 'Settings',\n    app_search_placeholder: 'Search apps',\n    profile: 'Profile',\n    account: 'Account',\n    help: 'Help',\n    log_out: 'Log out',\n    about_dhis2: 'About DataOrb',\n    manage_my_apps: 'Manage my apps',\n    no_results_found: 'No results found',\n    interpretations: 'Interpretations',\n    messages: 'Messages'\n  }\n};\nexport default i18nKeys;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { i18nKeys } from './i18n.js';\nimport i18n from './locales/index.js';\nexport const DEFAULT_LOCALE = {\n  id: 'en',\n  name: 'English'\n};\n\nconst isLangRTL = code => {\n  const langs = ['ar', 'fa', 'ur'];\n  const prefixed = langs.map(c => `${c}-`);\n  return langs.includes(code) || prefixed.filter(c => code.startsWith(c)).length > 0;\n};\n\nexport const configI18n = userSettings => {\n  const lang = userSettings.keyUiLocale || DEFAULT_LOCALE.id;\n\n  if (isLangRTL(lang)) {\n    document.body.setAttribute('dir', 'rtl');\n  }\n\n  i18n.changeLanguage(lang);\n};\nexport const injectTranslationsToD2 = d2 => {\n  if (d2) {\n    const translations = {};\n    const translationKeys = Object.keys(i18nKeys.d2UiComponents);\n\n    for (let i = 0; i < translationKeys.length; i++) {\n      const key = translationKeys[i];\n      translations[key] = i18n.t(i18nKeys.d2UiComponents[key]);\n    }\n\n    Object.assign(d2.i18n.translations, translations);\n  }\n};\nexport default configI18n;","export const MAX_WIDTH = 1400;\nexport const LATERAL_PADDING_FOR_MAIN_CONTAINERS = 20;\nconst styles = {\n  contentArea: {\n    maxWidth: MAX_WIDTH\n  },\n  feedbackSnackBar: {\n    position: 'fixed',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 3000 // over dialog\n\n  },\n  formControl: {\n    paddingRight: 10\n  },\n  cardContainer: {\n    outline: 'none',\n    paddingLeft: 10,\n    paddingTop: 10,\n    paddingBottom: 10,\n    paddingRight: 10,\n    marginBottom: 20\n  },\n  actionBtns: {\n    marginLeft: 10\n  }\n};\nexport default styles;","export const ACTION_MESSAGE = 'ACTION_MESSAGE';\nexport const ERROR = 'ERROR';\nexport const LOADING = 'LOADING';\nexport const SUCCESS = 'SUCCESS';\nexport const NONE = 'NONE';","export const calculatePageValue = pager => {\n  const pageSize = pager.pageSize;\n  const {\n    total,\n    pageCount,\n    page\n  } = pager;\n  const pageCalculationValue = total - (total - (pageCount - (pageCount - page)) * pageSize);\n  const startItem = pageCalculationValue - pageSize + 1;\n  const endItem = pageCalculationValue;\n  return `${startItem} - ${endItem > total ? total : endItem}`;\n};\nexport const filterElementsToPager = (elements, {\n  page,\n  pageSize\n}) => {\n  const pageElements = elements.slice((page - 1) * pageSize, page * pageSize);\n  /* first element of the page is open */\n\n  /* FIXME I have the feeling this is not the right place for this -- this a UI issue */\n\n  if (pageElements && pageElements.length) {\n    pageElements[0].open = true;\n  }\n\n  return pageElements;\n};\nexport const hasNextPage = pager => () => pager.page < pager.pageCount;\nexport const hasPreviousPage = pager => () => pager.page > 1;","import { Button } from '@dhis2/d2-ui-core';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { i18nKeys } from '../../i18n.js';\nimport i18n from '../../locales/index.js';\nimport styles from '../../styles.js';\n\nconst ConfirmationDialog = props => {\n  const keepEditing = () => {\n    props.closeConfirmation(false);\n  };\n\n  const discard = () => {\n    props.closeConfirmation(true);\n  };\n\n  const StyledDialog = withStyles({\n    root: {\n      margin: 8\n    }\n  })(DialogActions);\n  return /*#__PURE__*/React.createElement(Dialog, {\n    open: props.open\n  }, /*#__PURE__*/React.createElement(DialogTitle, null, i18n.t(i18nKeys.unsavedChangesTitle)), /*#__PURE__*/React.createElement(DialogContent, null, /*#__PURE__*/React.createElement(DialogContentText, null, i18n.t(i18nKeys.messages.unsavedChanges))), /*#__PURE__*/React.createElement(StyledDialog, null, /*#__PURE__*/React.createElement(\"span\", {\n    id: 'keep-editing-btn-id'\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: styles.actionBtns,\n    onClick: keepEditing\n  }, i18n.t(i18nKeys.btns.keepEditing))), /*#__PURE__*/React.createElement(\"span\", {\n    id: 'discard-changes-btn-id'\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: styles.actionBtns,\n    raised: true,\n    color: \"primary\",\n    onClick: discard,\n    autoFocus: true\n  }, i18n.t(i18nKeys.btns.discard)))));\n};\n\nConfirmationDialog.propTypes = {\n  closeConfirmation: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired\n};\nexport default ConfirmationDialog;","/* i18n */\nimport { DEFAULT_LOCALE } from '../../configI18n.js';\nimport { i18nKeys } from '../../i18n.js';\nimport i18n from '../../locales/index.js';\n/* API Endpoints */\n\nexport const LANGUAGES_API_URL = '/locales/db?paging=false';\n/* Constants for Filter By Select */\n\nexport const ALL_ID = 'ALL';\nexport const TRANSLATED_ID = 'TRANSLATED';\nexport const UNTRANSLATED_ID = 'UNTRANSLATED';\nexport const PARTIAL_TRANSLATED_ID = 'PARTIAL_TRANSLATED';\nexport const ALL_ITEM = {\n  id: ALL_ID,\n  name: i18n.t(i18nKeys.searchToolbar.selects.filterBy.all)\n};\nexport const TRANSLATED_ITEM = {\n  id: TRANSLATED_ID,\n  name: i18n.t(i18nKeys.searchToolbar.selects.filterBy.translated)\n};\nexport const UNTRANSLATED_ITEM = {\n  id: UNTRANSLATED_ID,\n  name: i18n.t(i18nKeys.searchToolbar.selects.filterBy.untranslated)\n};\nexport const PARTIAL_TRANSLATED_ITEM = {\n  id: PARTIAL_TRANSLATED_ID,\n  name: i18n.t(i18nKeys.searchToolbar.selects.filterBy.partialTranslated)\n};\nexport const FILTER_BY_ITEMS = [ALL_ITEM, TRANSLATED_ITEM, PARTIAL_TRANSLATED_ITEM, UNTRANSLATED_ITEM];\nexport const DEFAULT_TRANSLATABLE_PROPERTIES = [{\n  name: 'name',\n  translationKey: 'NAME'\n}, {\n  name: 'shortName',\n  translationKey: 'SHORT_NAME'\n}, {\n  name: 'description',\n  translationKey: 'DESCRIPTION'\n}, {\n  name: 'formName',\n  translationKey: 'FORM_NAME'\n}];\nexport const INITIAL_LOCALES = [DEFAULT_LOCALE];\nexport const INITIAL_PAGER = {\n  pageSize: 5,\n  page: 1,\n  total: 0,\n  pageCount: 1\n};","import { TRANSLATED_ID, UNTRANSLATED_ID, PARTIAL_TRANSLATED_ID } from './translations.conf.js';\nexport const colors = {\n  [TRANSLATED_ID]: '#1c9d17',\n  [UNTRANSLATED_ID]: '#000000',\n  [PARTIAL_TRANSLATED_ID]: '#ff9800'\n};\nconst styles = {\n  actionsContainer: {\n    paddingTop: 20,\n    paddingBottom: 20\n  },\n  header: {\n    cursor: 'pointer',\n    textTransform: 'uppercase'\n  },\n  icon: {\n    textAlign: 'right'\n  }\n};\nexport default styles;","import { Button } from '@dhis2/d2-ui-core';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Done from '@material-ui/icons/Done';\nimport PropTypes from 'prop-types';\nimport React, { Fragment } from 'react';\nimport { i18nKeys } from '../../i18n.js';\nimport i18n from '../../locales/index.js';\nimport styles from '../../styles.js';\nimport translationCardStyles, { colors } from './TranslationCard.style.js';\nimport { TRANSLATED_ID } from './translations.conf.js';\n\nconst translationValueOfObjectForLocaleAndTranslationKey = (object, localeId, translationKey) => {\n  const selectedTranslation = object.translations.find(translation => translation.locale === localeId && translation.property === translationKey);\n  return selectedTranslation ? selectedTranslation.value : '';\n};\n\nconst TranslationCard = props => {\n  const {\n    onChangeTranslationForObjectAndLocale,\n    hasUnsavedChanges\n  } = props;\n\n  const onChange = translationKey => event => {\n    onChangeTranslationForObjectAndLocale({\n      objectId: props.object.id,\n      localeId: props.localeId,\n      translationKey,\n      value: event.target.value\n    });\n  };\n\n  const checkSave = () => !hasUnsavedChanges();\n\n  const getState = () => hasUnsavedChanges() ? hasUnsavedChanges().originalState : props.object.translationState;\n\n  const headerStyle = () => {\n    return { ...translationCardStyles.header,\n      color: colors[getState()]\n    };\n  };\n\n  const saveTranslationsOnKeyPress = event => {\n    if (event.key === 'Enter' && event.ctrlKey && !checkSave()) {\n      props.saveTranslations();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"dhis2-translations-item\"\n  }, /*#__PURE__*/React.createElement(Paper, {\n    tabIndex: 0,\n    onFocus: props.openCard,\n    style: styles.cardContainer\n  }, /*#__PURE__*/React.createElement(Grid, {\n    style: headerStyle(),\n    onClick: props.openCardOnClick,\n    container: true,\n    alignItems: \"center\"\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6\n  }, /*#__PURE__*/React.createElement(\"h3\", null, props.object[props.cardTitleProperty])), /*#__PURE__*/React.createElement(Grid, {\n    style: translationCardStyles.icon,\n    item: true,\n    xs: 6\n  }, getState() === TRANSLATED_ID && /*#__PURE__*/React.createElement(Done, {\n    style: translationCardStyles.translated\n  }))), props.open && /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    container: true\n  }, props.translatableProperties.map((property, index) => {\n    var _i18nKeys$translation;\n\n    return /*#__PURE__*/React.createElement(Grid, {\n      key: property.name,\n      id: property.name,\n      item: true,\n      xs: 12,\n      md: props.translatableProperties.length === 1 ? 12 : 6,\n      style: styles.formControl\n    }, /*#__PURE__*/React.createElement(TextField, {\n      autoFocus: index === 0,\n      fullWidth: true,\n      value: translationValueOfObjectForLocaleAndTranslationKey(props.object, props.localeId, property.translationKey),\n      type: \"text\",\n      label: i18n.t((_i18nKeys$translation = i18nKeys.translationForm[property.name]) !== null && _i18nKeys$translation !== void 0 ? _i18nKeys$translation : property.name),\n      onChange: onChange(property.translationKey),\n      onKeyDown: saveTranslationsOnKeyPress,\n      onClick: props.clearFeedback,\n      onBlur: props.clearFeedback\n    }));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"dhis2-translations-save-btn\",\n    style: translationCardStyles.actionsContainer\n  }, /*#__PURE__*/React.createElement(Button, {\n    raised: true,\n    color: \"primary\",\n    onClick: props.saveTranslations,\n    disabled: checkSave()\n  }, i18n.t(i18nKeys.translationForm.actionButton.label))))));\n};\n\nTranslationCard.propTypes = {\n  cardTitleProperty: PropTypes.string.isRequired,\n  clearFeedback: PropTypes.func.isRequired,\n  hasUnsavedChanges: PropTypes.func.isRequired,\n  localeId: PropTypes.string.isRequired,\n  object: PropTypes.shape({\n    displayName: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    translationState: PropTypes.string.isRequired,\n    translations: PropTypes.arrayOf(PropTypes.shape({\n      locale: PropTypes.string.isRequired,\n      property: PropTypes.string.isRequired,\n      value: PropTypes.string.isRequired\n    })).isRequired\n  }).isRequired,\n  openCard: PropTypes.func.isRequired,\n  openCardOnClick: PropTypes.func.isRequired,\n  saveTranslations: PropTypes.func.isRequired,\n  translatableProperties: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    translationKey: PropTypes.string.isRequired\n  })).isRequired,\n  onChangeTranslationForObjectAndLocale: PropTypes.func.isRequired,\n  open: PropTypes.bool\n};\nTranslationCard.defaultProps = {\n  open: false,\n  hasUnsavedChanges: () => false\n};\nexport default TranslationCard;","import { LATERAL_PADDING_FOR_MAIN_CONTAINERS } from '../../styles.js';\nconst styles = {\n  container: {\n    paddingLeft: LATERAL_PADDING_FOR_MAIN_CONTAINERS,\n    paddingRight: LATERAL_PADDING_FOR_MAIN_CONTAINERS\n  },\n  noResultsContainer: {\n    marginTop: 20,\n    paddingLeft: LATERAL_PADDING_FOR_MAIN_CONTAINERS,\n    paddingRight: LATERAL_PADDING_FOR_MAIN_CONTAINERS\n  },\n  pagination: {\n    textAlign: 'right'\n  }\n};\nexport default styles;","import { Pagination } from '@dhis2/d2-ui-core';\nimport Paper from '@material-ui/core/Paper';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport '@dhis2/d2-ui-core/build/css/Pagination.css';\nimport styles from '../../styles.js';\nimport * as PAGINATION_HELPER from '../../utils/pagination.js';\nimport TranslationCard from './TranslationCard.js';\nimport { DEFAULT_TRANSLATABLE_PROPERTIES } from './translations.conf.js';\nimport translationsListStyles from './TranslationsList.style.js';\n\nconst PaginationBuilder = (pager, goToNextPage, goToPreviousPage) => /*#__PURE__*/React.createElement(\"div\", {\n  \"data-test\": \"dhis2-translations-pagination\"\n}, /*#__PURE__*/React.createElement(Pagination, {\n  total: pager.total,\n  hasNextPage: PAGINATION_HELPER.hasNextPage(pager),\n  hasPreviousPage: PAGINATION_HELPER.hasPreviousPage(pager),\n  onNextPageClick: goToNextPage,\n  onPreviousPageClick: goToPreviousPage,\n  currentlyShown: PAGINATION_HELPER.calculatePageValue(pager)\n}));\n\nexport const NoResults = () => /*#__PURE__*/React.createElement(\"div\", {\n  style: translationsListStyles.noResultsContainer\n}, /*#__PURE__*/React.createElement(Paper, {\n  style: styles.cardContainer\n}, \"No Results\"));\n\nconst TranslationsList = props => props.objects && props.objects.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n  id: 'translation-list-container',\n  style: translationsListStyles.container\n}, PaginationBuilder(props.pager, props.goToNextPage, props.goToPreviousPage), props.objects.map(object => /*#__PURE__*/React.createElement(TranslationCard, {\n  key: object.id,\n  open: object.open,\n  hasUnsavedChanges: props.hasUnsavedChanges(object.id),\n  localeId: props.localeId,\n  object: object,\n  translatableProperties: props.translatableProperties,\n  onChangeTranslationForObjectAndLocale: props.onChangeTranslationForObjectAndLocale,\n  saveTranslations: props.saveTranslations(object.id),\n  openCard: props.openCard(object.id),\n  openCardOnClick: props.openCardOnClick(object.id),\n  clearFeedback: props.clearFeedback,\n  cardTitleProperty: props.cardTitleProperty\n})), PaginationBuilder(props.pager, props.goToNextPage, props.goToPreviousPage)) : /*#__PURE__*/React.createElement(NoResults, null);\n\nTranslationsList.propTypes = {\n  cardTitleProperty: PropTypes.string.isRequired,\n  clearFeedback: PropTypes.func.isRequired,\n  goToNextPage: PropTypes.func.isRequired,\n  goToPreviousPage: PropTypes.func.isRequired,\n  hasUnsavedChanges: PropTypes.func.isRequired,\n  localeId: PropTypes.string.isRequired,\n  objects: PropTypes.arrayOf(PropTypes.shape({\n    displayName: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    translationState: PropTypes.string.isRequired,\n    translations: PropTypes.arrayOf(PropTypes.shape({\n      locale: PropTypes.string.isRequired,\n      property: PropTypes.string.isRequired,\n      value: PropTypes.string.isRequired\n    })).isRequired\n  })).isRequired,\n  openCard: PropTypes.func.isRequired,\n  openCardOnClick: PropTypes.func.isRequired,\n  pager: PropTypes.shape({\n    page: PropTypes.number.isRequired,\n    pageCount: PropTypes.number.isRequired,\n    pageSize: PropTypes.number.isRequired,\n    total: PropTypes.number.isRequired\n  }).isRequired,\n  saveTranslations: PropTypes.func.isRequired,\n  onChangeTranslationForObjectAndLocale: PropTypes.func.isRequired,\n  translatableProperties: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    translationKey: PropTypes.string.isRequired\n  }))\n};\nTranslationsList.defaultProps = {\n  translatableProperties: DEFAULT_TRANSLATABLE_PROPERTIES\n};\nexport default TranslationsList;","import { LATERAL_PADDING_FOR_MAIN_CONTAINERS } from '../../styles.js';\nconst styles = {\n  container: {\n    paddingLeft: LATERAL_PADDING_FOR_MAIN_CONTAINERS,\n    paddingRight: LATERAL_PADDING_FOR_MAIN_CONTAINERS,\n    paddingTop: 20,\n    paddingBottom: 20,\n    backgroundColor: '#e8e8e8'\n  }\n};\nexport default styles;","import Grid from '@material-ui/core/Grid';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport Search from '@material-ui/icons/Search.js';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from '../../styles.js';\nimport translationsSearchStyles from './TranslationsSearch.style.js';\nexport const SelectControl = ({\n  items,\n  label,\n  onChange,\n  value\n}) => {\n  /* passes the whole object and not only id */\n  const onChangeEnhanced = event => {\n    onChange(items.find(item => item.id === event.target.value));\n  };\n\n  return /*#__PURE__*/React.createElement(TextField, {\n    select: true,\n    label: label,\n    value: value,\n    onChange: onChangeEnhanced,\n    fullWidth: true\n  }, items.map(item => /*#__PURE__*/React.createElement(MenuItem, {\n    key: item.id,\n    value: item.id\n  }, item.name)));\n};\nSelectControl.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  onChange: PropTypes.func\n};\nSelectControl.defaultProps = {\n  value: '',\n  onChange: () => null\n};\n/* to avoid null exceptions */\n\nconst nonHandler = () => null;\n\nconst TranslationsSearch = props => {\n  const onChangeForSearchFieldEnhanced = event => {\n    props.onSearchTermChange(event.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: translationsSearchStyles.container\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true\n  }, /*#__PURE__*/React.createElement(Grid, {\n    id: 'select-object-id',\n    item: true,\n    xs: 12,\n    md: 3,\n    style: styles.formControl\n  }, /*#__PURE__*/React.createElement(SelectControl, {\n    value: props.selectedObjectName,\n    onChange: props.onObjectChange,\n    items: props.objectSelectItems,\n    label: props.objectSelectLabel\n  })), /*#__PURE__*/React.createElement(Grid, {\n    id: 'select-filter-id',\n    item: true,\n    xs: 12,\n    md: 3,\n    style: styles.formControl\n  }, /*#__PURE__*/React.createElement(SelectControl, {\n    value: props.selectedFilterId,\n    onChange: props.onFilterChange,\n    items: props.filterByItems,\n    label: props.filterBySelectLabel\n  })), /*#__PURE__*/React.createElement(Grid, {\n    id: 'select-locale-id',\n    item: true,\n    xs: 12,\n    md: 3,\n    style: styles.formControl\n  }, /*#__PURE__*/React.createElement(SelectControl, {\n    value: props.selectedLocaleId,\n    onChange: props.onLocaleChange,\n    items: props.localeSelectItems,\n    label: props.localeSelectLabel\n  })), /*#__PURE__*/React.createElement(Grid, {\n    id: 'select-search-id',\n    item: true,\n    xs: 12,\n    md: 3,\n    style: styles.formControl\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: props.searchFieldLabel,\n    type: \"search\",\n    value: props.searchTerm,\n    onChange: onChangeForSearchFieldEnhanced,\n    fullWidth: true,\n    InputProps: {\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\"\n      }, /*#__PURE__*/React.createElement(Search, null))\n    },\n    onKeyPress: props.onSearchKeyPress\n  }))));\n};\n\nTranslationsSearch.propTypes = {\n  filterByItems: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  filterBySelectLabel: PropTypes.string.isRequired,\n  localeSelectItems: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  localeSelectLabel: PropTypes.string.isRequired,\n  objectSelectItems: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired\n  })).isRequired,\n  objectSelectLabel: PropTypes.string.isRequired,\n  searchFieldLabel: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string,\n  selectedFilterId: PropTypes.string,\n  selectedLocaleId: PropTypes.string,\n  selectedObjectName: PropTypes.string,\n  onFilterChange: PropTypes.func,\n  onLocaleChange: PropTypes.func,\n  onObjectChange: PropTypes.func,\n  onSearchKeyPress: PropTypes.func,\n  onSearchTermChange: PropTypes.func\n};\nTranslationsSearch.defaultProps = {\n  selectedLocaleId: null,\n  onLocaleChange: nonHandler,\n  selectedFilterId: null,\n  onFilterChange: nonHandler,\n  selectedObjectName: null,\n  onObjectChange: nonHandler,\n  searchTerm: '',\n  onSearchTermChange: nonHandler,\n  onSearchKeyPress: nonHandler\n};\nexport default TranslationsSearch;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { FeedbackSnackbar, CircularProgress } from '@dhis2/d2-ui-core';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent, Fragment } from 'react';\nimport { DEFAULT_LOCALE } from '../../configI18n.js';\nimport { i18nKeys } from '../../i18n.js';\nimport i18n from '../../locales/index.js';\nimport styles from '../../styles.js';\nimport * as FEEDBACK_SNACKBAR_TYPES from '../../utils/feedbackSnackBarTypes.js';\nimport { filterElementsToPager } from '../../utils/pagination.js';\nimport ConfirmationDialog from './ConfirmationDialog.js';\nimport * as PAGE_CONFIGS from './translations.conf.js';\nimport TranslationsList from './TranslationsList.js';\nimport TranslationsSearch from './TranslationsSearch.js';\nconst DEFAULT_SNACKBAR_CONF = {\n  type: FEEDBACK_SNACKBAR_TYPES.NONE,\n  message: '',\n  action: '',\n  onActionClick: null\n};\nconst OVERRIDE_TITLE_AND_SEARCH_PROPS = {\n  programRuleAction: 'content'\n};\n/* auxiliar methods */\n\n/* FIXME move to an external file, SchemaEntry class */\n\nconst modelToSchemaEntry = model => ({\n  id: model.name,\n  name: model.displayName,\n  translatableProperties: model.getTranslatablePropertiesWithKeys(),\n  apiEndpoint: model.apiEndpoint\n});\n/* FIXME move to an external file, Element class */\n\n/* receives a fat element and translatableProperties to filter translations and translationState for locale */\n\n/* returns an element only with needed information */\n\n\nconst flatElementForPropertiesAndLocale = (element, translatableProperties, localeId) => {\n  const translations = [];\n  let translatedProperties = 0;\n\n  for (let j = 0; j < translatableProperties.length; j++) {\n    const property = translatableProperties[j];\n    const translationForPropertyAndLocale = element.translations.find(t => t.property === property.translationKey && t.locale === localeId && t.value.trim().length);\n\n    if (translationForPropertyAndLocale) {\n      translatedProperties += 1;\n      translations.push(translationForPropertyAndLocale);\n    } else {\n      translations.push({\n        property: property.translationKey,\n        locale: localeId,\n        value: ''\n      });\n    }\n  }\n\n  let translationState = PAGE_CONFIGS.PARTIAL_TRANSLATED_ID;\n\n  if (translatedProperties === 0) {\n    translationState = PAGE_CONFIGS.UNTRANSLATED_ID;\n  } else if (translatedProperties === translatableProperties.length) {\n    translationState = PAGE_CONFIGS.TRANSLATED_ID;\n  }\n\n  return { ...element,\n    translations,\n    translationState\n  };\n};\n\nclass TranslationsPage extends PureComponent {\n  /* configuring initial state */\n  constructor(props) {\n    super(props);\n    /* filtering for translatable models and transforming model for select */\n\n    _defineProperty(this, \"onLocaleChange\", selectedLocale => {\n      this.applyNextSearchFilter(this.nextSearchFilterWithChange({\n        selectedLocale,\n        pager: PAGE_CONFIGS.INITIAL_PAGER\n      }));\n    });\n\n    _defineProperty(this, \"onFilterChange\", selectedFilter => {\n      this.applyNextSearchFilter(this.nextSearchFilterWithChange({\n        selectedFilter,\n        pager: PAGE_CONFIGS.INITIAL_PAGER\n      }));\n    });\n\n    _defineProperty(this, \"onObjectChange\", object => {\n      if (this.state.unsavedChangesMap.length) {\n        this.setState({\n          showConfirmation: true,\n          nextSelectedObject: object\n        });\n      } else {\n        this.setState({\n          unsavedChangesMap: []\n        });\n        this.fetchElementsForObjectAndUpdateResults(object);\n      }\n    });\n\n    _defineProperty(this, \"onSearchTermChange\", searchTerm => {\n      this.setState({\n        searchFilter: this.nextSearchFilterWithChange({\n          searchTerm\n        })\n      });\n    });\n\n    _defineProperty(this, \"onSearchKeyPress\", event => {\n      if (event.key === 'Enter') {\n        const searchTerm = event.target.value;\n        this.applyNextSearchFilter(this.nextSearchFilterWithChange({\n          searchTerm,\n          pager: PAGE_CONFIGS.INITIAL_PAGER\n        }));\n      }\n    });\n\n    _defineProperty(this, \"onChangeTranslationForObjectAndLocale\", ({\n      objectId,\n      localeId,\n      translationKey,\n      value\n    }) => {\n      // can reach here without click anywhere\n      this.clearFeedbackSnackbar();\n      this.updateOriginalsOnChange({\n        objectId,\n        localeId,\n        translationKey,\n        value\n      }); // Update current search results to keep state between pages\n\n      const searchResults = [...this.state.searchResults];\n      const searchResultsItemInstance = searchResults.find(objectInstance => objectInstance.id === objectId);\n      const translationEntryForSearchResult = searchResultsItemInstance.translations.find(translation => translation.locale === localeId && translation.property === translationKey);\n\n      if (translationEntryForSearchResult) {\n        translationEntryForSearchResult.value = value;\n      } else {\n        searchResultsItemInstance.translations.push({\n          property: translationKey,\n          locale: localeId,\n          value\n        });\n      }\n\n      const currentPageResults = [...this.state.currentPageResults];\n      const selectedObjectInstance = currentPageResults.find(objectInstance => objectInstance.id === objectId);\n\n      if (selectedObjectInstance) {\n        const translationEntry = selectedObjectInstance.translations.find(translation => translation.locale === localeId && translation.property === translationKey);\n\n        if (translationEntry) {\n          translationEntry.value = value;\n        } else {\n          selectedObjectInstance.translations.push({\n            property: translationKey,\n            locale: localeId,\n            value\n          });\n        }\n      }\n\n      this.setState({\n        currentPageResults,\n        searchResults\n      });\n    });\n\n    _defineProperty(this, \"closeConfirmation\", response => {\n      if (response) {\n        this.fetchElementsForObjectAndUpdateResults(this.state.nextSelectedObject);\n        this.setState({\n          unsavedChangesMap: [],\n          nextSelectedObject: null\n        });\n      }\n\n      this.setState({\n        showConfirmation: false\n      });\n    });\n\n    _defineProperty(this, \"updateOriginalsOnChange\", ({\n      objectId,\n      localeId,\n      translationKey,\n      value\n    }) => {\n      // Update original objects to keep state between filters\n      const originals = [...this.state.objectInstances];\n      const originalItemInstance = originals.find(objectInstance => objectInstance.id === objectId);\n      const elementWithState = flatElementForPropertiesAndLocale(originalItemInstance, this.state.searchFilter.selectedObject.translatableProperties, this.state.searchFilter.selectedLocale.id); // Keep unsaved translations\n\n      if (!this.state.unsavedChangesMap.some(unsavedChange => unsavedChange.objectId === objectId && unsavedChange.localeId === localeId)) {\n        this.state.unsavedChangesMap.push({\n          objectId,\n          localeId,\n          originalState: elementWithState.translationState,\n          originalTranslations: elementWithState.translations\n        });\n      }\n\n      const translationEntryForOriginal = originalItemInstance.translations.find(translation => translation.locale === localeId && translation.property === translationKey);\n\n      if (translationEntryForOriginal) {\n        translationEntryForOriginal.value = value;\n      } else {\n        originalItemInstance.translations.push({\n          property: translationKey,\n          locale: localeId,\n          value\n        });\n      }\n    });\n\n    _defineProperty(this, \"saveTranslationForObjectId\", objectId => () => {\n      const api = this.props.d2.Api.getApi();\n      const currentLocale = this.state.searchFilter.selectedLocale.id; // Current page results to update after save\n\n      const currentPageResults = [...this.state.currentPageResults];\n      const selectedObjectIndex = currentPageResults.findIndex(objectInstance => objectInstance.id === objectId);\n      const selectedObjectInstance = currentPageResults[selectedObjectIndex]; // Current search results to update after save\n\n      const searchResults = [...this.state.searchResults];\n      const selectedObjectIndexInSearchResults = searchResults.findIndex(objectInstance => objectInstance.id === objectId); // All translatins loaded from server to update after save\n\n      const originalInstances = [...this.state.objectInstances];\n      const selectedOriginalObjectIndex = originalInstances.findIndex(originalInstance => originalInstance.id === objectId); // Unsaved changes\n\n      let unsaved = [...this.state.unsavedChangesMap];\n\n      if (selectedObjectInstance) {\n        this.startLoading();\n        const translationsUrlForInstance = `${this.state.searchFilter.selectedObject.apiEndpoint}/${objectId}/translations/`; // Translations that are being shown and able to be updated\n        // This ones are the translations we want to update\n\n        const inViewEditedTranslations = selectedObjectInstance.translations.filter(t => t.value.trim().length && t.locale === currentLocale); // Process all translations loaded from server and also edited ones (remove empty ones)\n\n        let allTranslationsForElement = originalInstances.find(element => element.id === objectId).translations;\n        allTranslationsForElement = allTranslationsForElement.filter(t => t.value.trim().length); // If edited, we need to replace value with original one and send it to server\n\n        const allUnsavedForElement = unsaved.filter(element => element.objectId === objectId);\n        const allOriginalTranslationsForUnsaved = allUnsavedForElement.flatMap(element => element.originalTranslations);\n        let filterTranslations = allTranslationsForElement.map(translation => {\n          const existInNotSaved = allOriginalTranslationsForUnsaved.find(t => t.property === translation.property && t.locale === translation.locale); // Keep original value of edited translations for other locales\n\n          if (existInNotSaved) {\n            if (existInNotSaved.value.trim().length && existInNotSaved.locale !== currentLocale) {\n              return {\n                property: translation.property,\n                locale: translation.locale,\n                value: existInNotSaved.value //Value before edited\n\n              };\n            } // Keep original value of not edited translations for other locales than selected one\n\n          } else if (translation.locale !== currentLocale) {\n            return translation;\n          }\n\n          return null;\n        }); // Remove translations that have been edited, not saved and do not have original value\n\n        filterTranslations = filterTranslations.filter(element => element != null);\n        const translations = [...filterTranslations, ...inViewEditedTranslations];\n        api.update(translationsUrlForInstance, {\n          translations: translations\n        }).then(() => {\n          /* open next card and show success message */\n\n          /* update card state and close it */\n          const flatElement = flatElementForPropertiesAndLocale(selectedObjectInstance, this.state.searchFilter.selectedObject.translatableProperties, currentLocale); // Must keep all existing translations for other locales \"flatElementForPropertiesAndLocale\" keeps\n          // only translations for selected locale (used to \"calculate\" current state/style)\n\n          flatElement.translations = [...allTranslationsForElement];\n          flatElement.open = false;\n          currentPageResults[selectedObjectIndex] = flatElement;\n          searchResults[selectedObjectIndexInSearchResults] = flatElement;\n          originalInstances[selectedOriginalObjectIndex] = flatElement; // Remove item from unsavedChanges\n\n          unsaved = unsaved.filter(element => !(element.objectId === objectId && element.localeId === currentLocale));\n          /* open next card */\n\n          if (selectedObjectIndex < currentPageResults.length - 1) {\n            currentPageResults[selectedObjectIndex + 1].open = true;\n          }\n\n          this.setState({\n            currentPageResults,\n            searchResults,\n            objectInstances: originalInstances,\n            unsavedChangesMap: unsaved\n          });\n          this.showSuccessMessage(i18n.t(i18nKeys.messages.translationsSaved));\n        }).catch(error => {\n          this.manageError(error);\n        });\n      }\n    });\n\n    _defineProperty(this, \"goToNextPage\", () => {\n      const nextPager = { ...this.state.searchFilter.pager\n      };\n      nextPager.page += 1;\n      this.setState({\n        searchFilter: this.nextSearchFilterWithChange({\n          pager: nextPager\n        }),\n        currentPageResults: filterElementsToPager(this.state.searchResults, nextPager)\n      });\n    });\n\n    _defineProperty(this, \"goToPreviousPage\", () => {\n      const nextPager = { ...this.state.searchFilter.pager\n      };\n      nextPager.page -= 1;\n      this.setState({\n        searchFilter: this.nextSearchFilterWithChange({\n          pager: nextPager\n        }),\n        currentPageResults: filterElementsToPager(this.state.searchResults, nextPager)\n      });\n    });\n\n    _defineProperty(this, \"openCardWithObjectId\", objectId => () => {\n      const currentPageResults = this.state.currentPageResults.map(o => o.id === objectId ? { ...o,\n        open: true\n      } : { ...o,\n        open: false\n      });\n      this.setState({\n        currentPageResults\n      });\n    });\n\n    _defineProperty(this, \"openCardOnClick\", objectId => () => {\n      this.clearFeedbackSnackbar();\n      this.openCardWithObjectId(objectId);\n    });\n\n    _defineProperty(this, \"hasUnsavedChanges\", (objectId, locale = null) => () => {\n      const currentLocale = locale ? locale : this.state.searchFilter.selectedLocale.id;\n      return this.state.unsavedChangesMap.find(unsavedChange => unsavedChange.objectId === objectId && unsavedChange.localeId === currentLocale);\n    });\n\n    _defineProperty(this, \"fetchElementsForObjectAndUpdateResults\", object => {\n      const model = object && object.id ? this.props.d2.models[object.id] : null;\n\n      if (model) {\n        this.startLoading();\n        model.list({\n          paging: false,\n          fields: 'id,displayName,name,content,translations'\n        }).then(objects => {\n          const objectInstances = objects ? objects.toArray() : [];\n          this.applyNextSearchFilter(this.nextSearchFilterWithChange({\n            selectedObject: object,\n            pager: PAGE_CONFIGS.INITIAL_PAGER\n          }), objectInstances);\n          this.clearFeedbackSnackbar();\n        }).catch(error => {\n          this.manageError(error);\n        });\n      } else {\n        this.manageError();\n      }\n    });\n\n    _defineProperty(this, \"promiseToFetchLanguages\", () => this.props.d2.Api.getApi().get(PAGE_CONFIGS.LANGUAGES_API_URL));\n\n    _defineProperty(this, \"updatableAndTranslatableModelsAsSchemaEntries\", () => {\n      const models = this.props.d2.models || [];\n      const modelKeys = Object.keys(models);\n      const modelNames = new Set([]);\n      const schemas = [];\n\n      for (let i = 0; i < modelKeys.length; i++) {\n        const modelKey = modelKeys[i];\n        const model = models[modelKey];\n        const modelName = model.name;\n\n        if (!modelNames.has(modelName) && model.isTranslatable() && this.props.d2.currentUser.canUpdate(model)) {\n          modelNames.add(model.name);\n          schemas.push(modelToSchemaEntry(model));\n        }\n      }\n\n      schemas.sort((objectA, objectB) => {\n        if (objectA.name > objectB.name) {\n          return 1;\n        } else if (objectB.name > objectA.name) {\n          return -1;\n        }\n\n        return 0;\n      });\n      return schemas;\n    });\n\n    _defineProperty(this, \"userLocaleFrom\", locales => {\n      const currentUser = this.props.d2.currentUser;\n      const userLocaleId = currentUser && currentUser.userSettings && currentUser.userSettings.keyUiLocale ? currentUser.userSettings.keyUiLocale : DEFAULT_LOCALE.id;\n      const userLocale = locales.find(locale => locale.id === userLocaleId);\n      return userLocale || (locales.length > 0 ? locales[0] : null);\n    });\n\n    _defineProperty(this, \"applyNextSearchFilter\", (nextSearchFilter, objectInstances = null) => {\n      const currentObjectInstances = objectInstances || this.state.objectInstances;\n      const searchFilter = { ...nextSearchFilter\n      };\n      const searchResults = this.prepareElementsToShowAndFilter(currentObjectInstances, searchFilter);\n      /* update pagination */\n\n      searchFilter.pager.total = searchResults.length;\n      searchFilter.pager.pageCount = Math.ceil(searchFilter.pager.total / searchFilter.pager.pageSize);\n      this.setState({\n        objectInstances: currentObjectInstances,\n        searchResults,\n        currentPageResults: filterElementsToPager(searchResults, searchFilter.pager),\n        searchFilter\n      });\n    });\n\n    _defineProperty(this, \"prepareElementsToShowAndFilter\", (elements, searchFilter) => {\n      if (elements && elements.length) {\n        const currentLocale = searchFilter.selectedLocale.id;\n        const currentFilterId = searchFilter.selectedFilter.id;\n        const currentSearchTerm = searchFilter.searchTerm.trim().toLowerCase();\n        const newElements = [];\n\n        for (let i = 0; i < elements.length; i++) {\n          var _element, _element$trim, _element$trim$toLower, _OVERRIDE_TITLE_AND_S, _searchFilter$selecte;\n\n          const element = elements[i];\n\n          if ((_element = element[(_OVERRIDE_TITLE_AND_S = OVERRIDE_TITLE_AND_SEARCH_PROPS[(_searchFilter$selecte = searchFilter.selectedObject) === null || _searchFilter$selecte === void 0 ? void 0 : _searchFilter$selecte.id]) !== null && _OVERRIDE_TITLE_AND_S !== void 0 ? _OVERRIDE_TITLE_AND_S : 'name']) !== null && _element !== void 0 && (_element$trim = _element.trim()) !== null && _element$trim !== void 0 && (_element$trim$toLower = _element$trim.toLowerCase()) !== null && _element$trim$toLower !== void 0 && _element$trim$toLower.includes(currentSearchTerm)) {\n            const flatElement = flatElementForPropertiesAndLocale(element, searchFilter.selectedObject.translatableProperties, currentLocale);\n            const state = this.hasUnsavedChanges(element.id, currentLocale)() ? this.hasUnsavedChanges(element.id, currentLocale)().originalState : flatElement.translationState;\n\n            if (currentFilterId === PAGE_CONFIGS.ALL_ID || state === currentFilterId) {\n              newElements.push(flatElement);\n            }\n          }\n        }\n\n        return newElements;\n      }\n\n      return [];\n    });\n\n    _defineProperty(this, \"nextSearchFilterWithChange\", searchFilterChange => ({ ...this.state.searchFilter,\n      ...searchFilterChange\n    }));\n\n    _defineProperty(this, \"buildLanguageSelectItemsArrayFromApiResponse\", languagesResponse => {\n      const locales = languagesResponse ? languagesResponse.map(language => ({\n        id: language.locale,\n        name: language.name\n      })) : [];\n      return locales.length > 0 ? locales : PAGE_CONFIGS.INITIAL_LOCALES;\n    });\n\n    _defineProperty(this, \"startLoading\", () => {\n      this.setState({\n        showSnackbar: true,\n        snackbarConf: {\n          type: FEEDBACK_SNACKBAR_TYPES.LOADING\n        }\n      });\n    });\n\n    _defineProperty(this, \"showSuccessMessage\", message => {\n      this.setState({\n        showSnackbar: true,\n        snackbarConf: {\n          type: FEEDBACK_SNACKBAR_TYPES.SUCCESS,\n          message\n        }\n      });\n    });\n\n    _defineProperty(this, \"showErrorMessage\", message => {\n      this.setState({\n        showSnackbar: true,\n        snackbarConf: {\n          type: FEEDBACK_SNACKBAR_TYPES.ERROR,\n          message\n        }\n      });\n    });\n\n    _defineProperty(this, \"manageError\", error => {\n      const messageError = error && error.message ? error.message : i18n.t(i18nKeys.messages.unexpectedError);\n      this.showErrorMessage(messageError);\n    });\n\n    _defineProperty(this, \"clearFeedbackSnackbar\", () => {\n      this.setState({\n        showSnackbar: false,\n        snackbarConf: DEFAULT_SNACKBAR_CONF\n      });\n    });\n\n    _defineProperty(this, \"isLoading\", () => this.state.showSnackbar && this.state.snackbarConf.type === FEEDBACK_SNACKBAR_TYPES.LOADING);\n\n    _defineProperty(this, \"isSearchFilterValid\", () => this.state.searchFilter.selectedLocale && this.state.searchFilter.selectedLocale.id && this.state.searchFilter.selectedFilter && this.state.searchFilter.selectedFilter.id && this.state.searchFilter.selectedObject && this.state.searchFilter.selectedObject.id);\n\n    const schemaEntries = this.updatableAndTranslatableModelsAsSchemaEntries();\n    this.state = {\n      showConfirmation: false,\n      showSnackbar: false,\n      snackbarConf: DEFAULT_SNACKBAR_CONF,\n      localeSelectItems: PAGE_CONFIGS.INITIAL_LOCALES,\n      filterByItems: PAGE_CONFIGS.FILTER_BY_ITEMS,\n      objectSelectItems: schemaEntries,\n      searchFilter: {\n        pager: PAGE_CONFIGS.INITIAL_PAGER,\n        selectedLocale: PAGE_CONFIGS.INITIAL_LOCALES.length > 0 ? PAGE_CONFIGS.INITIAL_LOCALES[0] : null,\n        selectedObject: schemaEntries.length > 0 ? schemaEntries[0] : null,\n        selectedFilter: PAGE_CONFIGS.ALL_ITEM,\n        searchTerm: ''\n      },\n\n      /* all instances of selected object type, fetched from server */\n      objectInstances: [],\n\n      /* objects filtered for current filter */\n      searchResults: [],\n\n      /* object filtered for current page */\n      currentPageResults: [],\n\n      /* changes array - id, locale, state before save, translations before save*/\n      unsavedChangesMap: [],\n      nextSelectedObject: null\n    };\n  }\n  /* componet lifestyle methods */\n\n\n  componentDidMount() {\n    this.startLoading();\n    /* Fetch languages and objects for Filter component */\n\n    this.promiseToFetchLanguages().then(response => {\n      const localeSelectItems = this.buildLanguageSelectItemsArrayFromApiResponse(response);\n      this.setState({\n        localeSelectItems\n      });\n      this.applyNextSearchFilter(this.nextSearchFilterWithChange({\n        selectedLocale: this.userLocaleFrom(localeSelectItems)\n      }));\n      /* FIXME risk to problems because setState is async -- use function setState */\n\n      this.fetchElementsForObjectAndUpdateResults(this.state.searchFilter.selectedObject);\n      this.clearFeedbackSnackbar();\n    }).catch(error => {\n      this.manageError(error);\n    });\n  }\n  /* event handlers */\n\n\n  render() {\n    var _OVERRIDE_TITLE_AND_S2, _this$state, _this$state$searchFil, _this$state$searchFil2;\n\n    /* Feedback Snackbar */\n    const feedbackElement = this.isLoading() ? /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.feedbackSnackBar\n    }, /*#__PURE__*/React.createElement(CircularProgress, null)) : /*#__PURE__*/React.createElement(FeedbackSnackbar, {\n      onClose: this.clearFeedbackSnackbar,\n      show: this.state.showSnackbar,\n      conf: this.state.snackbarConf\n    });\n    return /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(TranslationsSearch, {\n      localeSelectLabel: i18n.t(i18nKeys.searchToolbar.selects.locales.label),\n      localeSelectItems: this.state.localeSelectItems,\n      selectedLocaleId: this.state.searchFilter.selectedLocale ? this.state.searchFilter.selectedLocale.id : null,\n      onLocaleChange: this.onLocaleChange,\n      filterBySelectLabel: i18n.t(i18nKeys.searchToolbar.selects.filterBy.label),\n      filterByItems: this.state.filterByItems,\n      selectedFilterId: this.state.searchFilter.selectedFilter.id,\n      onFilterChange: this.onFilterChange,\n      objectSelectLabel: i18n.t(i18nKeys.searchToolbar.selects.objects.label),\n      objectSelectItems: this.state.objectSelectItems,\n      selectedObjectName: this.state.searchFilter.selectedObject ? this.state.searchFilter.selectedObject.id : null,\n      onObjectChange: this.onObjectChange,\n      searchFieldLabel: i18n.t(i18nKeys.searchToolbar.searchTextField.label),\n      searchTerm: this.state.searchFilter.searchTerm,\n      onSearchTermChange: this.onSearchTermChange,\n      onSearchKeyPress: this.onSearchKeyPress\n    }), /*#__PURE__*/React.createElement(TranslationsList, {\n      localeId: this.state.searchFilter.selectedLocale.id,\n      objects: this.state.currentPageResults,\n      translatableProperties: this.state.searchFilter.selectedObject.translatableProperties,\n      pager: this.state.searchFilter.pager,\n      goToNextPage: this.goToNextPage,\n      goToPreviousPage: this.goToPreviousPage,\n      onChangeTranslationForObjectAndLocale: this.onChangeTranslationForObjectAndLocale,\n      saveTranslations: this.saveTranslationForObjectId,\n      openCard: this.openCardWithObjectId,\n      openCardOnClick: this.openCardOnClick,\n      hasUnsavedChanges: this.hasUnsavedChanges,\n      clearFeedback: this.clearFeedbackSnackbar,\n      cardTitleProperty: (_OVERRIDE_TITLE_AND_S2 = OVERRIDE_TITLE_AND_SEARCH_PROPS[(_this$state = this.state) === null || _this$state === void 0 ? void 0 : (_this$state$searchFil = _this$state.searchFilter) === null || _this$state$searchFil === void 0 ? void 0 : (_this$state$searchFil2 = _this$state$searchFil.selectedObject) === null || _this$state$searchFil2 === void 0 ? void 0 : _this$state$searchFil2.id]) !== null && _OVERRIDE_TITLE_AND_S2 !== void 0 ? _OVERRIDE_TITLE_AND_S2 : 'name'\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"feedback-snackbar\"\n    }, feedbackElement), /*#__PURE__*/React.createElement(ConfirmationDialog, {\n      open: this.state.showConfirmation,\n      closeConfirmation: this.closeConfirmation\n    }));\n  }\n\n}\n\n_defineProperty(TranslationsPage, \"propTypes\", {\n  d2: PropTypes.object.isRequired\n});\n\nexport default TranslationsPage;","import D2UIApp from '@dhis2/d2-ui-app';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TranslationsPage from '../pages/Translations/index.js';\nimport styles from '../styles.js';\n\nconst App = ({\n  d2\n}) => /*#__PURE__*/React.createElement(D2UIApp, null, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.contentArea\n}, /*#__PURE__*/React.createElement(TranslationsPage, {\n  d2: d2\n})));\n\nApp.propTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default App;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport React from 'react';\nimport App from './components/App.js';\nimport 'material-design-icons-iconfont';\n\nconst AppWrapper = () => {\n  const {\n    d2\n  } = useD2();\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(App, {\n    d2: d2\n  });\n};\n\nexport default AppWrapper;"],"sourceRoot":""}